name: Lotto Notifier

on:
  schedule:
    # Esegue ogni giorno alle 21:30 UTC (modifica secondo il tuo fuso)
    - cron: "30 19 * * *"
  workflow_dispatch: # permette anche esecuzione manuale

jobs:
  lotto-job:
    runs-on: ubuntu-latest

    steps:
      # 1️⃣ Scarica il repository
      - uses: actions/checkout@v3

      # 2️⃣ Imposta Python
      - name: Set up Python
        uses: actions/setup-python@v4
        with:
          python-version: 3.11

      # 3️⃣ Installa dipendenze
      - name: Install dependencies
        run: |
          python -m pip install --upgrade pip
          pip install requests beautifulsoup4 lxml

      # 4️⃣ Esegui lo script reale
      - name: Run Lotto Script
        env:
          EMAIL_ADDRESS: ${{ secrets.EMAIL_ADDRESS }}
          EMAIL_PASSWORD: ${{ secrets.EMAIL_PASSWORD }}
          DESTINATARIO: ${{ secrets.DESTINATARIO }}
        run: python lotto.py
